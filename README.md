# frontend-nanodegree-mobile-portfolio
This repository contains a website for Frontend Nanodegree Project 4 Website Optimization.

## About this project
The objective of this project is to learn how to optimize the critical rendering path to reduce website performance issues. This project also uses Google PageSpeed Insights to measure website performance. Specifically, the website is designed to achive a PageSpeed score greater than 90, while keeping the page frame rate at 60fps.

## How do I run this project?
Per project requirement, the project ships with "dist" directory that contains the distributable version of the web app. To run the app, simply open dist/index.html with Chrome (or equivalent browser). Alternatively, you can visit the [GitHub project page for this project](http://tsakauchi.github.io/frontend-nanodegree-mobile-portfolio/).

## How do I build this project?
This project uses Grunt to perform minifications and run Google PageSpeed Insights.

### Prerequisites
- Node.js
- Node Package Manager
- Grunt (grunt-cli)
- Python (to run simple HTTP server)
- ImageMagick

### Instructions
1. Check this project out from GitHub.
2. From project root, run `npm install`. This will download all npm dependencies required to build this project.
3. From project root, run `grunt`. This will build a minified website under `dist` directory.
4. Go to `dist` directory and run `python -m http.server 8080`. This launches a simple HTTP server on port 8080.
5. Go back to project root, run `grunt psi-ngrok`. This runs Google PageSpeed Insights automatically.
  - NOTE: This will STOP WORKING after March 2016 because of a pending bugfix for the ngrok component. If psi-ngrok does not work, please run Google PageSpeed Insights manually by running ngrok to listen to port 8080 so that PSI can be performed against the public URL generated by ngrok. For more info, please review the [bug report](https://github.com/bubenshchykov/ngrok/issues/34).
6. If everything works as expected, you should see an output like this:
```
sakauct (master *) frontend-nanodegree-mobile-portfolio $ grunt psi-ngrok

Running "psi-ngrok" task

Running "pagespeed:local" (pagespeed) task

--------------------------------------------------------

URL:       50039162.ngrok.com
Strategy:  desktop
Speed:     96

CSS size                                   | 2.38 kB
HTML size                                  | 4.29 kB
Image size                                 | 26.65 kB
JavaScript size                            | 41.02 kB
CSS resources                              | 3
Hosts                                      | 8
JS resources                               | 3
Resources                                  | 15
Static resources                           | 11
Other size                                 | 42.18 kB
Total size of request bytes sent           | 1.42 kB

Leverage browser caching                   | 3

--------------------------------------------------------

Running "pagespeed:mobile" (pagespeed) task

--------------------------------------------------------

URL:       50039162.ngrok.com
Strategy:  mobile
Speed:     94
Usability: 100

CSS size                                   | 2.38 kB
HTML size                                  | 4.29 kB
Image size                                 | 26.65 kB
JavaScript size                            | 41.02 kB
CSS resources                              | 3
Hosts                                      | 8
JS resources                               | 3
Resources                                  | 15
Static resources                           | 11
Other size                                 | 29.35 kB
Total size of request bytes sent           | 1.42 kB

Leverage browser caching                   | 4.5

--------------------------------------------------------


Done, without errors.

```

## About the Optimizations
I performed the following optimizations:

### Minifications
1. HTML Minification (grunt-contrib-htmlmin)
2. CSS Minification (grunt-contrib-cssmin)
3. JS Minification (grunt-contrib-uglify)
4. Image Minification (grunt-contrib-imagemin)
5. Image Reduction (grunt-responsive-images)

### Critical Rendering Path
1. Load render-blocking CSS asynchronously
  - Convert style.css to load asynchronously using JavaScript provided by the Google Developer help page
  - Move styles that affect a large portion of the webpage from style.css to in-line stylesheet in index.html
2. Load render-blocking Web Font asynchronously
  - Convert Web Font CSS to load asynchronously using JavaScript provided by the official website
3. Load render-blocking JS asynchronously
  - Convert Google Analytics to load asynchronously using JavaScript provided by the official website
4. Load non-essential CSS only when necessary
  - Convert print.css to be media-specific stylesheet

### Scroll Optimization
1. Scroll performance optimization to refresh within 5ms
  - In updatePositions function, get scrollTop value once outside the loop ahead of position change, then update position in a loop.

### Resize Optimization
1. Refactored changePizzaSizes to refresh within 10ms
  - Set pizza width as a relative size so that reading old size became unnecessary.
